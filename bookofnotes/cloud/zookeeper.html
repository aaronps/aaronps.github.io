
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>zookeeper Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    
    <link rel="prev" href="kafka.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    Languages
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../languages/erlang.html">
            
                <a href="../languages/erlang.html">
            
                    
                    Erlang
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="../languages/erlang/rebar3.html">
            
                <a href="../languages/erlang/rebar3.html">
            
                    
                    Rebar3
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../languages/java.html">
            
                <a href="../languages/java.html">
            
                    
                    Java
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../languages/javascript.html">
            
                <a href="../languages/javascript.html">
            
                    
                    Javascript
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../languages/haxe.html">
            
                <a href="../languages/haxe.html">
            
                    
                    Haxe
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    Tools
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../tools/git.html">
            
                <a href="../tools/git.html">
            
                    
                    git
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../tools/npm.html">
            
                <a href="../tools/npm.html">
            
                    
                    npm
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../tools/gradle.html">
            
                <a href="../tools/gradle.html">
            
                    
                    gradle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../tools/intellij.html">
            
                <a href="../tools/intellij.html">
            
                    
                    intellij
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../tools/eclipse.html">
            
                <a href="../tools/eclipse.html">
            
                    
                    eclipse
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../tools/vscode.html">
            
                <a href="../tools/vscode.html">
            
                    
                    vscode
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../video/video.html">
            
                <a href="../video/video.html">
            
                    
                    Video
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../video/ffmpeg.html">
            
                <a href="../video/ffmpeg.html">
            
                    
                    ffmpeg
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../video/panorama.html">
            
                <a href="../video/panorama.html">
            
                    
                    Panorama
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../web/web.html">
            
                <a href="../web/web.html">
            
                    
                    Web
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../web/vuejs.html">
            
                <a href="../web/vuejs.html">
            
                    
                    vuejs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../web/webpack.html">
            
                <a href="../web/webpack.html">
            
                    
                    webpack
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="cloud.html">
            
                <a href="cloud.html">
            
                    
                    Cloud and distributed
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="kafka.html">
            
                <a href="kafka.html">
            
                    
                    kafka
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.6.2" data-path="zookeeper.html">
            
                <a href="zookeeper.html">
            
                    
                    zookeeper
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" >
            
                <span>
            
                    
                    Operating Systems
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" >
            
                <span>
            
                    
                    Linux
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1.1" data-path="../operatingsystems/centos.html">
            
                <a href="../operatingsystems/centos.html">
            
                    
                    Centos
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >zookeeper</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="zookeper">zookeper</h1>
<p><a href="https://zookeeper.apache.org/" target="_blank">https://zookeeper.apache.org/</a></p>
<p>ZooKeeper is a centralized service for maintaining configuration information, naming, providing distributed synchronization, and providing group services. All of these kinds of services are used in some form or another by distributed applications.</p>
<p>From <a href="https://cwiki.apache.org/confluence/display/ZOOKEEPER/Index" target="_blank">https://cwiki.apache.org/confluence/display/ZOOKEEPER/Index</a> </p>
<ul>
<li>In Zookeeper, only the leader makes changes to data and distributes it.</li>
<li>Zookeeper is used by some other software to coordinate, for example, Kafka.</li>
<li>ZooKeeper has JMX working, so you can use java mission control to connect to it and do things</li>
</ul>
<h2 id="starting">Starting</h2>
<p>There should be one configuration file which is shared with all the nodes&#x2026; so all the nodes on the cluster uses the same configuration file. Once the cluster is started, if it is version 3.5.0+ then its possible to dynamically update the config (that is, the list of servers which makes the cluster).</p>
<p>The configuration file have:</p>
<pre><code>    tickTime=2000
    dataDir=/var/lib/zookeeper
    clientPort=2181
</code></pre><p>Then start it pointing to the config file if needed.</p>
<p>Connect to it and access a shell-like environment, folders and files within folders, these represent the data, when some data is written to these, it is replicated to the servers.</p>
<h2 id="replicated">Replicated</h2>
<p>When running replicated, the config file may have extra lines:</p>
<pre><code>    initLimit=5
    syncLimit=2
    server.1=server-1-address:2888:3888
    server.2=server-2-address:2888:3888
    server.3=server-3-address:2888:3888
</code></pre><p>Each servers knows who is it because there should be a $dataDir/myid file which has an integer telling it which server it is. Note that if running multiple instances on the same server you have to use copies of the config file with different path for the dataDir, and maybe different ports.</p>
<p>If version is &gt;= 3.5.0 the config file has slight changes</p>
<pre><code>    tickTime=2000
    dataDir=/var/lib/zookeeper
    initLimit=5
    syncLimit=2
    server.1=server-1-address:2888:3888;2181
    server.2=server-2-address:2888:3888;2181
    server.3=server-3-address:2888:3888;2181
</code></pre><p>The first port is the normal communication port for communicating from server to server(2888 in this case)
The second port is the leader selection port, will be used when the leader is lost(3888)
The port after the semicolon (if it exists) is the client port&#x2026; which is the one the client applications uses to connect.</p>
<h2 id="optimizations-on-config">Optimizations on config</h2>
<pre><code>To get low latencies on updates it is important to have a dedicated transaction log directory. By default transaction logs are put in the same directory as the data snapshots and myid file. The dataLogDir parameters indicates a different directory to use for the transaction logs.

From &lt;https://zookeeper.apache.org/doc/trunk/zookeeperStarted.html&gt; 
</code></pre>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="kafka.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: kafka">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"zookeeper","level":"1.6.2","depth":2,"next":{"title":"Operating Systems","level":"1.7","depth":1,"ref":"","articles":[{"title":"Linux","level":"1.7.1","depth":2,"ref":"","articles":[{"title":"Centos","level":"1.7.1.1","depth":3,"path":"operatingsystems/centos.md","ref":"operatingsystems/centos.md","articles":[]}]}]},"previous":{"title":"kafka","level":"1.6.1","depth":2,"path":"cloud/kafka.md","ref":"cloud/kafka.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"cloud/zookeeper.md","mtime":"2017-11-09T12:53:26.633Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2017-11-10T05:11:17.874Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

