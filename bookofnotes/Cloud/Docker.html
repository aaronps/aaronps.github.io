<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>Docker</title>
	<meta name="generator" content="Zim 0.68-rc1">
	<meta name="viewport" content="width=device-width">
	<!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans:300&subset=latin,greek,latin-ext' rel='stylesheet' type='text/css'> -->
	<![if !IE]>
	<!-- comment out for IE since it spams the user with warnings -->
	<script type='text/javascript' src='http://code.jquery.com/jquery-1.7.1.js'></script>
	<script type='text/javascript'>
		$(window).load(function(){$("#navigation").height( $("#content").height()+65 );});
	</script>
	<![endif]>
	<style>
		body, html {
			height:100%;
			font-family:'Open Sans', sans-serif;
			line-height:1.5em;
			font-weight:300;
			background-color:#FAFAFA;
			text-rendering:geometricPrecision;
			margin:0;
			padding:0;
		}
		.wrapper {
			height:100%;
			position:relative;
		}
		#navigation {
			background-color:#F3F3F3;
			display:inline-block;
			border-right:1px solid #EAEAEA;
			padding-right:65px;
			padding-top:65px;
			padding-left:25px;
			position:relative;
			float:left;
			min-height:100%;
		}
		#content {
			float:left;
			display:inline-block;
			position:absolute;
			max-width:960px;
			padding:65px;
		}
		#navigation ul {
			margin-top:0;
			margin-bottom:0;
			padding-left:40px;
		}
		#navigation li {
			list-style-type:none;
		}
		#navigation a {
			text-decoration:none;
			color:gray;
		}
		#navigation strong {
			color:#4E9A06;
			font-weight:400;
		}
		#navigation a:hover {
			text-decoration:underline;
		}
		#content h1:nth-child(1) {
			margin-top:0;
		}
		h1,h2,h3,h4,h5,h6 {
			color:#4E9A06;
			font-weight:300;
			margin-bottom: 0;
		}
		p {
			margin-top: 0;
		}
		#content a {
			color:#CE5C00;
		}
		#content a {
			text-decoration: none;
		}
		#content a:hover {
			text-decoration: underline;
		}
		#content a:active {
			text-decoration: underline;
		}
		#content strike {
			color: grey;
		}
		#content u {
			text-decoration: none;
			background-color: yellow;
		}
		#content tt {
			color: #2e3436;
		}
		#content pre {
			color: #2e3436;
			margin-left: 20px;
		}
		.backlinks {
			color:gray;
		}
		hr.footnotes {
			width: 20%;
			margin-left: 0;
		}
		@media print{
			#navigation{
				background-color:#FFF;
			}
		}

		span.zim-tag {
			color: #ce5c00;
		}
		div.zim-object {
			border-style:solid;
			border-width:1px;
		}

		.checked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8sMEGsKGkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEBUlEQVRIx62V22tdRRTGf7Nn73P2ybntnNOe3NqkPTGgLTVUUZF6QatSLOKTPgqCIqLgQ0H/A1sQQbBYCBb1QfAxiC8tSO1FqHkwJVKtjdTGNraUmObsc9nXmfGh7cGYpM1D5nHWzPetteZb3wg2eB2YqYm4zSadsMtoboiNBH/3TE0awx6j+MRoxoTg/IYRvP19TQrJS0bzhdHGSyKFkLTtjSKwMjyiEz43ynhtP6bdjBCWyFobAf7eT7VhNF/q1FRbjYjmUohlCVPwnB+6FUxMTJipqSmUUhhjEGKd3bMT4ks/Y6oLBK2Yth8hHYtCJXOix7Nf7xLMzc0xOzvLzp078TyPNE3viW3QJPXzhNWbxFFKHCmMhoLn/FHodd48vGfhapdAacXQlkFK5dL6wIUm6fuTZPuvqDQhaMUYYyiVyuQr6rXDexYuAdi3tSv1ZJNs/R/CaszzT+1na88uXFnCEnJVgivBNN8uTJKmHQI/ptOOcXNZzMz9mOqFs90OHpipWcYwlo5P4ebnuOkrvr5wgrH+h3im7y36MzuwRXYZeKha/OhP0EkadFoxQSdGSotedR/+XwMc2XvKdNUFOFqZx6LKZWIiwjgkikNmLp/hm8sH+K1zjFTHXfBYdTi+eJArzXM0GxFxoBDCopLvo/fqEwi1XPkWkGqjFo2TgB1jOYZUKZTS/D1/ncmLh7jon0IbRWoiTi59ymzzJEEQE3cStNZsGxqlfPE57MBbOR8fP3hDGalOO9fq2DlBvmZw8xa2IxACGn6TydlD/O6f5OzSV/zif0cYhLQaEXGkKBbz7Ov/AOlXV1cxgBJRI3fuSTrpTawt18kWIZN1CFuaONI0w0WOXfsI43YIggh/KUSlhqxrMz74AkOZcWBm9QkH+Gw8NDLuITi+m0yzhluSyJzBLcpblUhFxywSRAEtPwQjsKVN30CNh0uvYuOubSHLtN3J0TO1j0pmBNuFbFWRK0gyPRZpktL2I5JQkclKakNlnh54g6ocvevUr/Ai2a7wineEkcJupA3S1Wg0nVZM2E6wbEF5U5G9Q++wI7sfR7h3N8HVNstykBfzH+KJEZwiWD0aIwxCgJ0R1Mu7GXOeJSuK93bZtQIle4D9pUNU5DC5jEsu55AvZakM5NicGyEj8uuz8bUCQgj67QfY671P3vEoeC69gy695U1U7NG7XV0pUwBjDJa1/JJlWWxzHuflzQe5FJ/GsgUVuZ2t8lEkTvfc0aNHb72flBhjVicQQqCUuvM3/M+WDVguWBrMVdDXEGZlBVEUrVCU9d9s5+fnaTQa2PZyPxEIhJaI1EEoZwX4ncynp6fXrmB4eJjR0VFarRbNZnP9P9rt9gohqNVq1Ov1ZbF/AZGev3hLJ2/zAAAAAElFTkSuQmCC)}
		.xchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8bDYnDxEwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEK0lEQVRIx9WVS2hTWRjHf/eR3CY1nbxMH2YiZRQS6qO13YlMVxY3SnVcuNIBFezGpSADLoQqLu1sHJCqdCFSXFpw4YOCSH3BtFqttTNamabX3DS5bfO6uffMoglja3RGcDMHzuac7/z/53++//cd+L8P6VuCPQYZ8ADNgBd4J31DcDcQs+GnHByRocEDv0kfBSjAOlYCs11Q+gpwDegS8LMJ+3QIK0ATzEhV8Odnz5bzw8P4dJ25aJQ/WlvJ1df/K7hSLtOcTNI+Pk69rpMTgqIQhCDvh1/VSpw79+gRrRMTmLZNezLJJsPg+a5dmOEwQlFqg1sWG16/Jv7sGWXDwBACFQjC9HcwIMONKkGp4PGAJGEDS0IQmZlhnWnye3c3eiyGo6qr3WHbrJ+dJf7gAXI6zSIr72T7/fgzmT4FHnTBsgrQBfYvTU0km5vxz86iADnAm0rRPTWFt7cXZccOJJcLAGHb2K9ekT93jmwmwwdAAFpjI6Ntbfxw5879ag7l6o1sr5eHHR3IsRgeQK/M4sQE+YEB7JcvEY6zAj45SWFgAPPxYwzHoQxIkQjTPT0kIxE+Noj8sexFn4/xnh58iQTeSpHkHAdrbIzi0BCOrmNPTpK/eJHM3bt8sCyKQCiR4NWePWSiUZw1+ZLXJm4pFKLhzBlCsRh2RUXacVgeGaF47RrL58+zcP8+RrmMkCQinZ1EL1zAjERqmkH+tLYl1G3bCJw4QUjT0IA0MJfLMX/5MqmHD0nZNiUgtGULG/r7ccXjINWuWbnmqsuFu7sb/4EDNLlcBIEioNs2KUAFGmMxmk6dQm1tRZI+3xBqEkiShBQOox05Ql1nJ26gvuIUAWiKQnj/ftStW5Fk+YuF+NldsbBA4cYN9KdPmaso8Fc62ZJtk7l1C2t0FGdxESHE1xE4hkHh6lX0oSHSpRIewC/LrPf7CSgKNpCamkI/fZr8pUuIZBIcpyaBunahPp1mub+fDyMjGKUSChCsq6Nh717q9u2jbnSU0uAgRrFIwTThyhUCqRS+hgZKLS1fJvDm87SNjZGcnsYUAjcQ8vsJ9/Xh7u1FDgRQN20iks3iDA+zZFmYhQLqzZtsj8WY3L0baY2Sf55ICCKpFHUzM2SEQAJCHg+hY8fQDh5EDgRWDoRC1J88SePRo2geD0XAcBy8b98Sv3ePYDZbbf2rFQjLIphMsmDbaEBQVQkePox26BCSz7e6i4bDrDt+nGYhmBscpFAskheC4Js3bPR4qHphFYEnlcI7P4/jdqNpGu8TCe4oCsXr1z//F2ga3+/cSfTJE0qmSVYIsKzaOZDcbjKyzFIiwfvt21kMBLA07YsetzWNd+3tLLW0sH5igvT8PH9Go/z44kX+E4LGjg7GDYOcy4XlOEgLC//5P/5LCFzxOPLmzWyIx+m6fduu7v0NVGqyTSycKksAAAAASUVORK5CYII=)}
		.unchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8qAt8h3m8AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAA60lEQVRIx+2VsQqDMBRF70sCLg5OLoKgjk7+lJ/hh+STXBwcnRz8ArMEkrxOFktbaC3tULzTg5e8k5vADXDq70VbobXmvu/hvQczg4heHrJfXxQFuq67blZbMc8zpmlCXddIkgTOuZcBUko45zCOI6y1Nz2xFSEEZFmGOI7fGg4A3nsQEZqmuXOu9jallACAtm3fvmutNaIoAjM/dkBECCF89KCbk4eAb+kEnIAT8EsAM0OIz3hSyrssUvss8t5fg+uIrLXPs0gIgWVZYIyBUurQyYdheO4gz3NUVQVjDNZ1PfSjpWmKsixvehfB9GBZ3NndrgAAAABJRU5ErkJggg==)}
		.migrated-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB+AKHREFA8vJSnkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAC1klEQVRIx+2VT0hUURTGf/e958w4Tc3TYowMw1GyEgwr1MqsFmbZIrIWQZsWJUjbdoHQpl3Qps0swnCRECQFYkR/TC1iKkqmfzAKTo2Vf8hoRsfR995tkRMT87RRWkUHHhy495zvnvvu933wP/75EKkkEAjIYDCIaZpIKRFCZN0kfX9xcTGtra2/irVUEolECIfDlJeXo+s6hmFkDaCqKoZhEAqFSCaTv60pqcSyLAoLC/F4PEtqDmCaJkIIKisrMybX0sdUVRWA5ubmPzdNjjI1cpXkZC/O1fV03PXgdDqRUtpPIITAsqxsDz0Z/3CZQv8uqo4N4C8/Tp2/DdM0MiZQlvk41OTkI/LW1SGtCVb5drD3eCc71wcA+VcAHA5vDd8+3UGakxiJV7i9pdQevU5T1R35pJ3MV5QW1pf+0kWBheJ2SWua8EQXZXsu4fVVYEz1sEKvof5EuxjoPvzpcRvrdp9C2gGMx6cpOHBmbImMesds7BZubwMVDTfXDnQ3vQfK7AC8wLfExMX5whyQc3q2OEnjGm5vE76SQxsfBLr77a7CNf+n0r/l6sSMtsBSnurckiIILCobAtVZhpF4gZF4jubaymj4Ch/fd380LE7bAnjc0NPxk2yqpmEuwGxF0ag+0k5uTpzZeBeaazvj0We8fXojainsb2xh2BZgbe0gSIllzSIUh63wfQ6dZ/O2fbjcKlOj58jJ3cVENESw5yErc9nf2MLQ4jwQAkV1Lqiq37/cZ9WaahJjF9AcmxiPDhLs7ePe23oOnmUwg2hSShQle96tKDjA2HAniusgo9FxnvY9Jxw7RWzGYy92QghM00x5g53qp9sHmtB58/o2umOI2NwGolMnMYUHIb7aAyiKwsjICLqu2/qBEIKUUAohMaSHSLyBSMoPTINQ6CX5+fn2AEVFRZSUlBCPx4nFYhl3L4RESjF/GEgX3pSj+Xw+/H7/b3U/AEOZFnp7O5+5AAAAAElFTkSuQmCC)}
		ul {list-style-image: none}
		/* ul rule needed to reset style for sub-bullets */

	</style>
</head>

<body>
	<div class="wrapper">
		<div id="navigation"> <ul>
<li><a href="../Cloud.html" title="Cloud" class="page">Cloud</a>
<ul>
<li><b>Docker</b></li>
<li><a href="./Kafka.html" title="Kafka" class="page">Kafka</a></li>
<li><a href="./Zookeeper.html" title="Zookeeper" class="page">Zookeeper</a></li>
</ul>
</li>
<li><a href="../index.html" title="index" class="page">index</a></li>
<li><a href="../languages.html" title="languages" class="page">languages</a></li>
<li><a href="../Networking.html" title="Networking" class="page">Networking</a></li>
<li><a href="../Operating_Systems.html" title="Operating Systems" class="page">Operating Systems</a></li>
<li><a href="../tools.html" title="tools" class="page">tools</a></li>
<li><a href="../video.html" title="video" class="page">video</a></li>
<li><a href="../web.html" title="web" class="page">web</a></li>
</ul>
 </div>
		<div id="content">
			<h1>Docker <a name='Cloud:Docker'></a></h1>

			<p>
ports:<br>
<div style='padding-left: 30pt'>
2376/tcp - docker config port?<br>
2377/tcp - cluster management comms<br>
7946/{tcp,udp} - comm between nodes<br>
4789/udp overlay network
</div>
</p>

<p>
if encripted network uses ip proto 50 (ESP)
</p>

<p>
user: docker/tcuser
</p>

<p>
docker image pull swarm (before creation)
</p>

<p>
shell has some environment variables regarding to which docker-machine to connect
</p>

<p>
<div style='padding-left: 30pt'>
env | grep DOCKER
</div>
</p>

<p>
set environment to work with machine
</p>

<p>
<div style='padding-left: 30pt'>
eval `docker-machine env machine_name`
</div>
</p>

<p>
if weird errors happens about connecting, check environment variables, maybe not<br>
be set correctly.
</p>

<p>
Running containers with systemd<br>
<a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html/managing_containers/using_systemd_with_containers" title="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html/managing_containers/using_systemd_with_containers" class="https">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html/managing_containers/using_systemd_with_containers</a>
</p>

<p>
<a href="http://blog.marcnuri.com/docker-container-as-linux-system-service/" title="http://blog.marcnuri.com/docker-container-as-linux-system-service/" class="http">http://blog.marcnuri.com/docker-container-as-linux-system-service/</a>
</p>

<h2>centos</h2>

<br>

<div class="zim-object">
<pre><code class="sh"># bad, dont do: yum install docker

# add mirror repo
wget https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/centos/docker-ce.repo

# replace download.docker.com with mirrors.tuna.tsinghua.edu.cn/docker-ce, then
yum install docker-ce

# For china, edit /etc/docker/daemon.json, add:
# "registry-mirrors": ["https://registry.docker-cn.com"]
# this also works on docker tools, you must docker-machine ssh and do there

#in centos 7.2, use older version
yum install docker-ce-17.06.1.ce

# in the centos i tested centos would complay about overlay2 and xfs needing to reformat
# edit daemon.json, add:
# "storage-driver": "overlay"

systemctl start docker</code></pre>
</div>

<br>

<h2>windows</h2>

<br>

<p>
win10 pro: docker-for-windows (uses hyperv)<br>
other windows: docker toolbox (uses virtualbox)
</p>

<p>
After install run Docker quickstart terminal it does some initial configuration<br>
and downloads some files
</p>

<p>
If want to save machines on a custom folder (not default ~/.docker/machine/...)<br>
then set environment variable MACHINE_STORAGE_PATH and it is what it will use.
</p>

<h2>commands</h2>

<div class="zim-object">
<pre><code class="sh">docker --version
docker info
docker image  ...
docker container ...
docker run ...
# local_file or local_path can be '-' for stdin/out
docker cp local_file container_name:path
docker cp container_name:path local_path

# run and remove container after finish
docker run ... --rm

# run interactive session, for example bash
docker run -it &lt;image&gt; &lt;command&gt;

# detach from interactive session: Press ctrl+p ctrl+q
# attach to running session: press enter twice after this command
docker attach &lt;session&gt;

# docker attach on windows might complain about mintty
winpty attach &lt;session&gt;

# list sessions
docker ps

# download image locally. Note that this is automatic when you "run".
# docker image pull == docker pull
docker image pull image/name
docker pull mysql:5.7

# get things from china registry (not using configured mirror)
docker pull registry.docker-cn.com/library/mysql:5.7

docker run --name testmysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=root -d mysql:5.7
docker run -it --link some-mysql:mysql --rm mysql:5.7 sh -c 'exec mysql -h"$MYSQL_PORT_3306_TCP_ADDR" -P"$MYSQL_PORT_3306_TCP_PORT" -uroot -p"$MYSQL_ENV_MYSQL_ROOT_PASSWORD"'
docker run -it --rm mysql mysql -hsome.mysql.host -usome-mysql-user -p

# run with -p port:port to share a port, -P is not sharing it

# create image with current container changes
docker container commit ...

# run with extra permissions, like access to hardware devices
docker run --privileged

# add access to some devices, like hardware cards
docker run --device 


# shell has some environment variables regarding to which docker-machine to connect
env | grep DOCKER

# set environment to work with machine
eval `docker-machine env machine_name`

# add remote host to docker-machine: 1- create keys if don't have
ssh-keygen -t rsa

# add remote host to docker-machine: 2- add it
docker-machine create -d generic
	--generic-ip-address &lt;ip&gt;       # MUST: the accesible ip of the machine
	--generic-engine-port &lt;port&gt;    # default: 2376
	--generic-ssh-key &lt;path/to/key&gt; # default to user default
	--generic-ssh-port &lt;port&gt;       # default 22
	--generic-ssh-user &lt;user&gt;       # default: 'root'


# to check: when doing reprovisioning, the hostname might be rewritten
# checked: regenerate-certs does change the hostname to default value</code></pre>
</div>

<br>

<h2>NVidia GPU and containers</h2>

<p>
Use <a href="https://github.com/nvidia/nvidia-docker" title="nvidia-docker" class="https">nvidia-docker</a>, here Centos 7.2 instructions(install obsolete version):
</p>
<div class="zim-object">
<pre><code class="sh">wget https://nvidia.github.io/nvidia-docker/centos7/nvidia-docker.repo
yum install --setopt=obsoletes=0 nvidia-docker2-2.0.0-1.docker17.06.1.ce
pkill -SIGHUP dockerd

# to create new container
docker run --runtime=nvidia ... nvidia-based-image

# to start container created with nvidia runtime just do like you normally do
docker start -i ...</code></pre>
</div>

<br>

<h2>Swarm</h2>

<div class="zim-object">
<pre><code class="sh"># when create machine, add the --swarm parameter, otherwise somethings might fail
docker-machine create ... --swarm

# NOTE the ports must be forwarded and not firewalled

# init the master
# if it is a virtual machine, the advertise ip:port should be public and forwarded
# and listen-addr should be the one of the the virtual network card which receives
# the forward
docker swarm init --advertise-addr &lt;ip:port&gt; --listen-addr &lt;ip:port&gt;

# to get the token or command needed to add workers or managers
docker swarm join-token &lt;worker|manager&gt;

# on the workers run the command (remember the manager port should be forwarded
# and not firewalled)
docker swarm join --advertise-addr ip:port --token &lt;token&gt; ip:port</code></pre>
</div>

<br>

<h2>Dockerfile</h2>

<br>

<p>
reference: <a href="https://docs.docker.com/engine/reference/builder/" title="https://docs.docker.com/engine/reference/builder/" class="https">https://docs.docker.com/engine/reference/builder/</a><br>
review: <a href="https://blog.alexellis.io/mutli-stage-docker-builds/" title="https://blog.alexellis.io/mutli-stage-docker-builds/" class="https">https://blog.alexellis.io/mutli-stage-docker-builds/</a><br>
tips: <a href="https://hackernoon.com/tips-to-reduce-docker-image-sizes-876095da3b34" title="https://hackernoon.com/tips-to-reduce-docker-image-sizes-876095da3b34" class="https">https://hackernoon.com/tips-to-reduce-docker-image-sizes-876095da3b34</a>
</p>

<p>
apt:<br>
<div style='padding-left: 30pt'>
-- no-install-recommends<br>
--no-cache<br>
rm -rf /var/lib/apt/lists/*
</div>
nvidia/cuda ubuntu images has configuration in-place for cleaning and disabling cache each apt run, didn't check if base ubuntu is similar
</p>

<br>

<p>
yum:
</p>
<div class="zim-object">
<pre>
yum install -y bc &amp;&amp; \
yum clean all &amp;&amp; \
rm -rf /var/cache/yum</pre>
</div>

<br>

<h3>Simple ssh server</h3>

<br>

<p>
Dockerfile:
</p>
<div class="zim-object">
<pre><code class="sh">FROM centos:7

RUN yum -y install openssh-server
RUN ssh-keygen -A
RUN echo "root:root" | chpasswd

ENTRYPOINT [ "/usr/sbin/sshd", "-D", "-e" ] 

EXPOSE 22</code></pre>
</div>

<p>
Commands:
</p>
<div class="zim-object">
<pre><code class="sh"># build container
docker build -t sshserver .

# create container (listen on port 10022), run detacched
docker run --name mySSH -p 10022:22 -d sshserver

# ssh-in
ssh root@ip -p 10022

# run bash on running container
docker exec -it mySSH bash

# stop container
docker stop mySSH

# start container (already created one)
docker start mySSH</code></pre>
</div>

<br>

<h3>Simple mounted folder</h3>

<br>

<p>
Dockerfile:
</p>
<div class="zim-object">
<pre>
FROM centos:7

VOLUME /code

ENTRYPOINT bash</pre>
</div>

<p>
Commands:
</p>
<div class="zim-object">
<pre><code class="sh"># build container
docker build -t shareddir .

# create container
docker run --name mySharedDir -it -v /local/path:/container/path shareddir
</code></pre>
</div>

<br>

<h2>In Container notes</h2>

<br>

<p>
Shared memory: run with <tt>--ipc host</tt>
</p>

<p>
Install cmake
</p>
<div class="zim-object">
<pre><code class="sh"># from out of container
docker cp cmake-&lt;version&gt;-Linux-...sh [[container_name:path]]

# in container
path/to/cmake-&lt;version&gt;-Linux-...sh --prefix=/usr/local --exclude-subdir </code></pre>
</div>

<br>

<h3>Ubuntu</h3>

<div class="zim-object">
<pre><code class="sh"># modify sources.list for China
sed -i 's/archive\.ubuntu\.com/cn\.archive\.ubuntu\.com/' /etc/apt/sources.list

</code></pre>
</div>



			<br>
			<span class="backlinks">
			</span>

			
		</div>
	</div>
</body>
</html>

