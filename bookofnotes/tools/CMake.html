<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>CMake</title>
	<meta name="generator" content="Zim 0.68-rc1">
	<meta name="viewport" content="width=device-width">
	<!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans:300&subset=latin,greek,latin-ext' rel='stylesheet' type='text/css'> -->
	<![if !IE]>
	<!-- comment out for IE since it spams the user with warnings -->
	<script type='text/javascript' src='http://code.jquery.com/jquery-1.7.1.js'></script>
	<script type='text/javascript'>
		$(window).load(function(){$("#navigation").height( $("#content").height()+65 );});
	</script>
	<![endif]>
	<style>
		body, html {
			height:100%;
			font-family:'Open Sans', sans-serif;
			line-height:1.5em;
			font-weight:300;
			background-color:#FAFAFA;
			text-rendering:geometricPrecision;
			margin:0;
			padding:0;
		}
		.wrapper {
			height:100%;
			position:relative;
		}
		#navigation {
			background-color:#F3F3F3;
			display:inline-block;
			border-right:1px solid #EAEAEA;
			padding-right:65px;
			padding-top:65px;
			padding-left:25px;
			position:relative;
			float:left;
			min-height:100%;
		}
		#content {
			float:left;
			display:inline-block;
			position:absolute;
			max-width:960px;
			padding:65px;
		}
		#navigation ul {
			margin-top:0;
			margin-bottom:0;
			padding-left:40px;
		}
		#navigation li {
			list-style-type:none;
		}
		#navigation a {
			text-decoration:none;
			color:gray;
		}
		#navigation strong {
			color:#4E9A06;
			font-weight:400;
		}
		#navigation a:hover {
			text-decoration:underline;
		}
		#content h1:nth-child(1) {
			margin-top:0;
		}
		h1,h2,h3,h4,h5,h6 {
			color:#4E9A06;
			font-weight:300;
			margin-bottom: 0;
		}
		p {
			margin-top: 0;
		}
		#content a {
			color:#CE5C00;
		}
		#content a {
			text-decoration: none;
		}
		#content a:hover {
			text-decoration: underline;
		}
		#content a:active {
			text-decoration: underline;
		}
		#content strike {
			color: grey;
		}
		#content u {
			text-decoration: none;
			background-color: yellow;
		}
		#content tt {
			color: #2e3436;
		}
		#content pre {
			color: #2e3436;
			margin-left: 20px;
		}
		.backlinks {
			color:gray;
		}
		hr.footnotes {
			width: 20%;
			margin-left: 0;
		}
		@media print{
			#navigation{
				background-color:#FFF;
			}
		}

		span.zim-tag {
			color: #ce5c00;
		}
		div.zim-object {
			border-style:solid;
			border-width:1px;
		}

		.checked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8sMEGsKGkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEBUlEQVRIx62V22tdRRTGf7Nn73P2ybntnNOe3NqkPTGgLTVUUZF6QatSLOKTPgqCIqLgQ0H/A1sQQbBYCBb1QfAxiC8tSO1FqHkwJVKtjdTGNraUmObsc9nXmfGh7cGYpM1D5nHWzPetteZb3wg2eB2YqYm4zSadsMtoboiNBH/3TE0awx6j+MRoxoTg/IYRvP19TQrJS0bzhdHGSyKFkLTtjSKwMjyiEz43ynhtP6bdjBCWyFobAf7eT7VhNF/q1FRbjYjmUohlCVPwnB+6FUxMTJipqSmUUhhjEGKd3bMT4ks/Y6oLBK2Yth8hHYtCJXOix7Nf7xLMzc0xOzvLzp078TyPNE3viW3QJPXzhNWbxFFKHCmMhoLn/FHodd48vGfhapdAacXQlkFK5dL6wIUm6fuTZPuvqDQhaMUYYyiVyuQr6rXDexYuAdi3tSv1ZJNs/R/CaszzT+1na88uXFnCEnJVgivBNN8uTJKmHQI/ptOOcXNZzMz9mOqFs90OHpipWcYwlo5P4ebnuOkrvr5wgrH+h3im7y36MzuwRXYZeKha/OhP0EkadFoxQSdGSotedR/+XwMc2XvKdNUFOFqZx6LKZWIiwjgkikNmLp/hm8sH+K1zjFTHXfBYdTi+eJArzXM0GxFxoBDCopLvo/fqEwi1XPkWkGqjFo2TgB1jOYZUKZTS/D1/ncmLh7jon0IbRWoiTi59ymzzJEEQE3cStNZsGxqlfPE57MBbOR8fP3hDGalOO9fq2DlBvmZw8xa2IxACGn6TydlD/O6f5OzSV/zif0cYhLQaEXGkKBbz7Ov/AOlXV1cxgBJRI3fuSTrpTawt18kWIZN1CFuaONI0w0WOXfsI43YIggh/KUSlhqxrMz74AkOZcWBm9QkH+Gw8NDLuITi+m0yzhluSyJzBLcpblUhFxywSRAEtPwQjsKVN30CNh0uvYuOubSHLtN3J0TO1j0pmBNuFbFWRK0gyPRZpktL2I5JQkclKakNlnh54g6ocvevUr/Ai2a7wineEkcJupA3S1Wg0nVZM2E6wbEF5U5G9Q++wI7sfR7h3N8HVNstykBfzH+KJEZwiWD0aIwxCgJ0R1Mu7GXOeJSuK93bZtQIle4D9pUNU5DC5jEsu55AvZakM5NicGyEj8uuz8bUCQgj67QfY671P3vEoeC69gy695U1U7NG7XV0pUwBjDJa1/JJlWWxzHuflzQe5FJ/GsgUVuZ2t8lEkTvfc0aNHb72flBhjVicQQqCUuvM3/M+WDVguWBrMVdDXEGZlBVEUrVCU9d9s5+fnaTQa2PZyPxEIhJaI1EEoZwX4ncynp6fXrmB4eJjR0VFarRbNZnP9P9rt9gohqNVq1Ov1ZbF/AZGev3hLJ2/zAAAAAElFTkSuQmCC)}
		.xchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8bDYnDxEwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEK0lEQVRIx9WVS2hTWRjHf/eR3CY1nbxMH2YiZRQS6qO13YlMVxY3SnVcuNIBFezGpSADLoQqLu1sHJCqdCFSXFpw4YOCSH3BtFqttTNamabX3DS5bfO6uffMoglja3RGcDMHzuac7/z/53++//cd+L8P6VuCPQYZ8ADNgBd4J31DcDcQs+GnHByRocEDv0kfBSjAOlYCs11Q+gpwDegS8LMJ+3QIK0ATzEhV8Odnz5bzw8P4dJ25aJQ/WlvJ1df/K7hSLtOcTNI+Pk69rpMTgqIQhCDvh1/VSpw79+gRrRMTmLZNezLJJsPg+a5dmOEwQlFqg1sWG16/Jv7sGWXDwBACFQjC9HcwIMONKkGp4PGAJGEDS0IQmZlhnWnye3c3eiyGo6qr3WHbrJ+dJf7gAXI6zSIr72T7/fgzmT4FHnTBsgrQBfYvTU0km5vxz86iADnAm0rRPTWFt7cXZccOJJcLAGHb2K9ekT93jmwmwwdAAFpjI6Ntbfxw5879ag7l6o1sr5eHHR3IsRgeQK/M4sQE+YEB7JcvEY6zAj45SWFgAPPxYwzHoQxIkQjTPT0kIxE+Noj8sexFn4/xnh58iQTeSpHkHAdrbIzi0BCOrmNPTpK/eJHM3bt8sCyKQCiR4NWePWSiUZw1+ZLXJm4pFKLhzBlCsRh2RUXacVgeGaF47RrL58+zcP8+RrmMkCQinZ1EL1zAjERqmkH+tLYl1G3bCJw4QUjT0IA0MJfLMX/5MqmHD0nZNiUgtGULG/r7ccXjINWuWbnmqsuFu7sb/4EDNLlcBIEioNs2KUAFGmMxmk6dQm1tRZI+3xBqEkiShBQOox05Ql1nJ26gvuIUAWiKQnj/ftStW5Fk+YuF+NldsbBA4cYN9KdPmaso8Fc62ZJtk7l1C2t0FGdxESHE1xE4hkHh6lX0oSHSpRIewC/LrPf7CSgKNpCamkI/fZr8pUuIZBIcpyaBunahPp1mub+fDyMjGKUSChCsq6Nh717q9u2jbnSU0uAgRrFIwTThyhUCqRS+hgZKLS1fJvDm87SNjZGcnsYUAjcQ8vsJ9/Xh7u1FDgRQN20iks3iDA+zZFmYhQLqzZtsj8WY3L0baY2Sf55ICCKpFHUzM2SEQAJCHg+hY8fQDh5EDgRWDoRC1J88SePRo2geD0XAcBy8b98Sv3ePYDZbbf2rFQjLIphMsmDbaEBQVQkePox26BCSz7e6i4bDrDt+nGYhmBscpFAskheC4Js3bPR4qHphFYEnlcI7P4/jdqNpGu8TCe4oCsXr1z//F2ga3+/cSfTJE0qmSVYIsKzaOZDcbjKyzFIiwfvt21kMBLA07YsetzWNd+3tLLW0sH5igvT8PH9Go/z44kX+E4LGjg7GDYOcy4XlOEgLC//5P/5LCFzxOPLmzWyIx+m6fduu7v0NVGqyTSycKksAAAAASUVORK5CYII=)}
		.unchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8qAt8h3m8AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAA60lEQVRIx+2VsQqDMBRF70sCLg5OLoKgjk7+lJ/hh+STXBwcnRz8ArMEkrxOFktbaC3tULzTg5e8k5vADXDq70VbobXmvu/hvQczg4heHrJfXxQFuq67blZbMc8zpmlCXddIkgTOuZcBUko45zCOI6y1Nz2xFSEEZFmGOI7fGg4A3nsQEZqmuXOu9jallACAtm3fvmutNaIoAjM/dkBECCF89KCbk4eAb+kEnIAT8EsAM0OIz3hSyrssUvss8t5fg+uIrLXPs0gIgWVZYIyBUurQyYdheO4gz3NUVQVjDNZ1PfSjpWmKsixvehfB9GBZ3NndrgAAAABJRU5ErkJggg==)}
		.migrated-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB+AKHREFA8vJSnkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAC1klEQVRIx+2VT0hUURTGf/e958w4Tc3TYowMw1GyEgwr1MqsFmbZIrIWQZsWJUjbdoHQpl3Qps0swnCRECQFYkR/TC1iKkqmfzAKTo2Vf8hoRsfR995tkRMT87RRWkUHHhy495zvnvvu933wP/75EKkkEAjIYDCIaZpIKRFCZN0kfX9xcTGtra2/irVUEolECIfDlJeXo+s6hmFkDaCqKoZhEAqFSCaTv60pqcSyLAoLC/F4PEtqDmCaJkIIKisrMybX0sdUVRWA5ubmPzdNjjI1cpXkZC/O1fV03PXgdDqRUtpPIITAsqxsDz0Z/3CZQv8uqo4N4C8/Tp2/DdM0MiZQlvk41OTkI/LW1SGtCVb5drD3eCc71wcA+VcAHA5vDd8+3UGakxiJV7i9pdQevU5T1R35pJ3MV5QW1pf+0kWBheJ2SWua8EQXZXsu4fVVYEz1sEKvof5EuxjoPvzpcRvrdp9C2gGMx6cpOHBmbImMesds7BZubwMVDTfXDnQ3vQfK7AC8wLfExMX5whyQc3q2OEnjGm5vE76SQxsfBLr77a7CNf+n0r/l6sSMtsBSnurckiIILCobAtVZhpF4gZF4jubaymj4Ch/fd380LE7bAnjc0NPxk2yqpmEuwGxF0ag+0k5uTpzZeBeaazvj0We8fXojainsb2xh2BZgbe0gSIllzSIUh63wfQ6dZ/O2fbjcKlOj58jJ3cVENESw5yErc9nf2MLQ4jwQAkV1Lqiq37/cZ9WaahJjF9AcmxiPDhLs7ePe23oOnmUwg2hSShQle96tKDjA2HAniusgo9FxnvY9Jxw7RWzGYy92QghM00x5g53qp9sHmtB58/o2umOI2NwGolMnMYUHIb7aAyiKwsjICLqu2/qBEIKUUAohMaSHSLyBSMoPTINQ6CX5+fn2AEVFRZSUlBCPx4nFYhl3L4RESjF/GEgX3pSj+Xw+/H7/b3U/AEOZFnp7O5+5AAAAAElFTkSuQmCC)}
		ul {list-style-image: none}
		/* ul rule needed to reset style for sub-bullets */

	</style>
</head>

<body>
	<div class="wrapper">
		<div id="navigation"> <ul>
<li><a href="../Cloud.html" title="Cloud" class="page">Cloud</a></li>
<li><a href="../index.html" title="index" class="page">index</a></li>
<li><a href="../languages.html" title="languages" class="page">languages</a></li>
<li><a href="../Networking.html" title="Networking" class="page">Networking</a></li>
<li><a href="../Operating_Systems.html" title="Operating Systems" class="page">Operating Systems</a></li>
<li><a href="../tools.html" title="tools" class="page">tools</a>
<ul>
<li><a href="./browsers.html" title="browsers" class="page">browsers</a></li>
<li><b>CMake</b></li>
<li><a href="./eclipse.html" title="eclipse" class="page">eclipse</a></li>
<li><a href="./git.html" title="git" class="page">git</a></li>
<li><a href="./gradle.html" title="gradle" class="page">gradle</a></li>
<li><a href="./intellij.html" title="intellij" class="page">intellij</a></li>
<li><a href="./mingw-w64.html" title="mingw-w64" class="page">mingw-w64</a></li>
<li><a href="./nodejs.html" title="nodejs" class="page">nodejs</a></li>
<li><a href="./npm.html" title="npm" class="page">npm</a></li>
<li><a href="./tmux.html" title="tmux" class="page">tmux</a></li>
<li><a href="./vscode.html" title="vscode" class="page">vscode</a></li>
</ul>
</li>
<li><a href="../video.html" title="video" class="page">video</a></li>
<li><a href="../web.html" title="web" class="page">web</a></li>
</ul>
 </div>
		<div id="content">
			<h1>CMake <a name='tools:CMake'></a></h1>

			<p>
Uses a configuration file (<tt>CMakeLists.txt</tt>) to generate build files (Makefiles, ninja files, etc), then use native build tools to compile. The advantage is independence of build method, with enought care its possible to compile the same source with gcc on linux, mingw on windows, visual studio, codeblocks, etc.
</p>

<p>
The recommended building way is to create a separate directory for the build, then generate the files on that directory. For example:
</p>
<div class="zim-object">
<pre><code class="sh">mkdir build
cd build
cmake ..
make</code></pre>
</div>

<br>

<h2>Installing</h2>

<p>
<a href="https://cmake.org/download/" title="https://cmake.org/download/" class="https">https://cmake.org/download/</a>
</p>

<p>
<i>Recommend to add CMake to PATH if not already</i>
</p>

<p>
<b>Windows</b>:<br>
<div style='padding-left: 30pt'>
download and install
</div>
</p>

<p>
<b>Linux</b>:<br>
<div style='padding-left: 30pt'>
download and run command<br>
./<tt>cmake-&lt;version&gt;-Linux-x86_64.sh --prefix=/usr/local --exclude-subdir</tt>
</div>
</p>

<br>

<h2>Basic usage</h2>

<p>
CMakeLists.txt:
</p>
<div class="zim-object">
<pre><code class="cmake">cmake_minimum_required(VERSION 2.8)

project(basic_cmake_example)

add_executable(basic_executable src/file1.cpp src/file2.cpp)</code></pre>
</div>

<br>

<p>
Building with make
</p>
<div class="zim-object">
<pre><code class="sh">mkdir build
cd build
cmake ..
make </code></pre>
</div>

<br>

<p>
Building for debug and for release
</p>
<div class="zim-object">
<pre><code class="sh">mkdir debug
cd debug
cmake -DCMAKE_BUILD_TYPE=Debug ..

cd ..
mkdir release
cd release
cmake -DCMAKE_BUILD_TYPE=Release ..

# from within each folder just run make
make

# cmake can also be used here
cmake --build .

# from base folder you can use cmake like this
cd ..
cmake --build debug
cmake --build release</code></pre>
</div>

<br>

<h2>Command Line notes</h2>

<div class="zim-object">
<pre><code class="sh"># when building with make, the build commands are not show, to see them run like this
make VERBOSE=1

# it is also possible to add 'set( CMAKE_VERBOSE_MAKEFILE on )' to CMakeLists.xt

# build and profile with gprof
cmake -DCMAKE_CXX_FLAGS=-pg -DCMAKE_EXE_LINKER_FLAGS=-pg -DCMAKE_SHARED_LINKER_FLAGS=-pg &lt;SOURCE_DIR&gt;
make
./executable_name
# after your program finishes
gprof executable_name &gt; report.txt 
</code></pre>
</div>

<br>

<h2>CMakeLists.txt notes</h2>

<div class="zim-object">
<pre><code class="cmake"># Comments begins with #

# enable c++11
# enable c++11: if cmake version &gt;= 3.8
target_compile_features(target_name PRIVATE cxx_std_11)

# enable c++11: if cmake version &gt;= 3.1 
set_target_properties(target_name PROPERTIES CXX_STANDARD 11)

# enable c++11: cmake version &gt;= 3.1 for all targets:
set (CMAKE_CXX_STANDARD 11)
set (CMAKE_CXX_STANDARD_REQUIRED ON)
# or set the variables from the command line with '-DCMAKE_CXX_STANDARD=11'

# to autodetect build for 32 or 64bit
if (${CMAKE_SIZEOF_VOID_P} MATCHES 8)
	# here is 64bits
else ()
	# here is 32bits
endif ()
</code></pre>
</div>

<br>

<h2>Custom Lib</h2>

<p>
old but review: <a href="https://cmake.org/Wiki/CMake:How_To_Find_Libraries" title="https://cmake.org/Wiki/CMake:How_To_Find_Libraries" class="https">https://cmake.org/Wiki/CMake:How_To_Find_Libraries</a><br>
XXX_INCLUDE_DIRS<br>
XXX_LIBRARIES
</p>

<p>
CMAKE_PREFIX_PATH environment var
</p>

<p>
find_package() with version numbers will create variables with the user provided name but comparison is case sensitive:<br>
user says: find_package(asdf)<br>
package asdf is found and a variable is set asdf_VERSION<br>
user says: find_package(ASDF)<br>
same package is found and variable is set as ASDF_VERSION<br>
for this reason there is needed some logic ...
</p>

<p>
If want to get latests versions, add these two lines before find_package<br>
set(CMAKE_FIND_PACKAGE_SORT_ORDER NATURAL)<br>
set(CMAKE_FIND_PACKAGE_SORT_DIRECTION DEC)
</p>

<br>

<p>
CXX_STANDARD requires cmake 3.1<br>
project(DESCRIPTION) requires cmake 3.9
</p>

<p>
cmake generating files: <a href="https://crascit.com/2017/04/18/generated-sources-in-cmake-builds/" title="https://crascit.com/2017/04/18/generated-sources-in-cmake-builds/" class="https">https://crascit.com/2017/04/18/generated-sources-in-cmake-builds/</a>
</p>

<h2>Visual studio</h2>

<br>

<p>
Regarding subsystem (console, windows) take a look at <a href="https://cmake.org/Wiki/VSConfigSpecificSettings" title="https://cmake.org/Wiki/VSConfigSpecificSettings" class="https">https://cmake.org/Wiki/VSConfigSpecificSettings</a>
</p>

<p>
If using generated project files and need to <b>install</b> to copy `.dll` files,<br>
run `cmake-gui` again and select the output folder as `CMAKE_INSTALL_PREFIX`<br>
regenerate the project files then <b>build</b> `INSTALL` target on vs. 
</p>

<p>
Change run directory, 2 ways<br>
<ol type="1" start="1">
<li>Edit launch settings (Menu CMake -&gt; Debug and Launch Settings -&gt; name) add</li>
</ol>
</p>
<pre>
"currentDir": "${workspaceRoot}"
</pre>

<p>
<ol type="1" start="2">
<li>Add to CMakeLists.txt (Cmake &gt;= 3.8) <b>NOT WORKING</b></li>
</ol>
</p>
<pre>
set_target_properties(&lt;target&gt; PROPERTIES
    VS_DEBUGGER_WORKING_DIRECTORY "${CMAKE_CURRENT_LIST_DIR}")
</pre>

<br>

<h2>External library example</h2>

<br>

<p>
SDL2, uncompress the VC file, create `sdl2-config.cmake` on that folder
</p>

<div class="zim-object">
<pre><code class="cmake">set(SDL2_INCLUDE_DIRS "${CMAKE_CURRENT_LIST_DIR}/include")

# Support both 32 and 64 bit builds
if (${CMAKE_SIZEOF_VOID_P} MATCHES 8)
  set(SDL2_LIBRARIES "${CMAKE_CURRENT_LIST_DIR}/lib/x64/SDL2.lib;${CMAKE_CURRENT_LIST_DIR}/lib/x64/SDL2main.lib")
else ()
  set(SDL2_LIBRARIES "${CMAKE_CURRENT_LIST_DIR}/lib/x86/SDL2.lib;${CMAKE_CURRENT_LIST_DIR}/lib/x86/SDL2main.lib")
endif ()

string(STRIP "${SDL2_LIBRARIES}" SDL2_LIBRARIES)</code></pre>
</div>

<p>
start cmake-gui, select the Source folder (where CMakeLists is), and the "binaries" (where the generated build files will be), then it will do some work and fail.
</p>

<p>
Note there is one SDL2_DIR, set it to the correct location (the one with the sdl2-config.cmake).
</p>

<p>
Configure other parameters if you want, the click generate.
</p>

<h3>Generating by command line</h3>

<br>

<p>
for 32bit:
</p>

<p>
<div style='padding-left: 30pt'>
mkdir vs2017<br>
cd vs2017<br>
cmake -G "Visual Studio 15 2017" -D SDL2_DIR="c:\path\to\SDL2-X.X.X-VC" ..
</div>
</p>

<p>
for 64bit:
</p>

<p>
<div style='padding-left: 30pt'>
mkdir vs2017-64<br>
cd vs2017-64<br>
cmake -G "Visual Studio 15 2017 Win64" -D SDL2_DIR="c:\path\to\SDL2-X.X.X-VC" ..
</div>
</p>

<br>

<h3>If on the other hand open directly on VisualStudio</h3>

<br>

<p>
<i>After basic tests, I don't like how VS behaves this way, better avoid</i>
</p>

<p>
<b>WARNING</b>: This seems doesn't work on vs2017 anymore, maybe my fault, check another way below.
</p>

<p>
Edit settings and add something like this to each configuration:
</p>
<div class="zim-object">
<pre><code class="js">"variables": [
	{
		"name": "SDL2_DIR",
		"value": "path\\to\\SDL2-X.X.X-VC"
	}
]</code></pre>
</div>

<br>

<p>
Another way after open the project is to right click on `CMakeLists.txt` and select <b>Change CMake Settings</b>,<br>
then on the command args you can add what you need, like: `-DSDL2_DIR=path\\to\\SDL2`.
</p>

<p>
NOTE: Maybe only need to select menu <b>CMake</b> and <b>Change CMake Settings</b>.
</p>

<p>
Also, take into account that these builds go automatically to "${env.USERPROFILE}\\CMakeBuilds\\${workspaceHash}\\build\\${name}" (the default on the settings) which is somewhere on your home.
</p>

<p>
If don't want some of the targets, select <b>Project -&gt; Edit Settings -&gt; CppProperties.json</b> and remove undesired ones, then close and open again folder.
</p>

<h3>External library on windows with mingw-w64</h3>

<br>

<p>
Uncompress SDL2 for mingw and add this `sdl2-config.cmake` to its folder:
</p>
<div class="zim-object">
<pre><code class="cmake"># Support both 32 and 64 bit builds
if (${CMAKE_SIZEOF_VOID_P} MATCHES 8)
  set(SDL2_BASE "${CMAKE_CURRENT_LIST_DIR}/x86_64-w64-mingw32")
else ()
  set(SDL2_BASE "${CMAKE_CURRENT_LIST_DIR}/i686-w64-mingw32")
endif ()

set(SDL2_INCLUDE_DIRS "${SDL2_BASE}/include/SDL2")
set(SDL2_LIBRARIES "-L${SDL2_BASE}/lib -lmingw32 -lSDL2main -lSDL2 -mwindows")

string(STRIP "${SDL2_LIBRARIES}" SDL2_LIBRARIES)</code></pre>
</div>

<br>

<p>
Then to use it
</p>
<div class="zim-object">
<pre><code class="cmake">find_package(SDL2 REQUIRED)
target_include_directories(targetname PRIVATE ${SDL2_INCLUDE_DIRS})
target_link_libraries(targetname ${SDL2_LIBRARIES})</code></pre>
</div>

<p>
When generating the makefiles, it runs better from command line, need to add the SDL2_DIR variable so cmake can find it
</p>

<p>
<ol type="1" start="1">
<li>Make sure the _mingw-w64_ you want is on the `PATH`</li>
<li>Create a directory to hold the resulting makefiles and binary, preffer a directory different from the base of your source code.</li>
<li>Run command adding the corect `SDL2_DIR`:</li>
</ol>
</p>

<p>
<div style='padding-left: 30pt'>
cmake -G "MinGW Makefiles" -D "SDL2_DIR=C:\path\to\SDL2-2.X.X-mingw" path\to\source
</div>
</p>

<p>
<ol type="1" start="4">
<li>Run `mingw32-make`</li>
</ol>
</p>

<h3>external library on windows for msvc and mingw</h3>

<br>

<p>
Having prepared the two previous `sdl2-config.cmake` with a common parent folder, add another `sdl2-config.cmake` there, for example:
</p>

<p>
<ul>
<li>SDL2-2.0.7
<ul>
<li>SDL2-2.0.7-VC</li>
<li>SDL2-2.0.7-mingw</li>
<li>sdl2-config.cmake</li>
</ul></li>
</ul>
</p>

<p>
The new `sdl2-config.cmake` just forwards to the correct one depending on the compiler used.
</p>
<div class="zim-object">
<pre><code class="cmake">if ( MINGW )
	include( ${CMAKE_CURRENT_LIST_DIR}/SDL2-2.0.7-mingw/sdl2-config.cmake)
elseif ( MSVC )
	include( ${CMAKE_CURRENT_LIST_DIR}/SDL2-2.0.7-VC/sdl2-config.cmake)
endif ()</code></pre>
</div>

<br>

<h3>find_package on windows</h3>

<br>

<p>
Computer\HKEY_LOCAL_MACHINE\SOFTWARE\Kitware\CMake\Packages\ffmpeg
</p>

<p>
Add key to registry (SDL2 as package example)<br>
`HKEY_LOCAL_MACHINE\SOFTWARE\Kitware\CMake\Packages\SDL2` set default value to<br>
path with the `.cmake` file.
</p>

<p>
Can be HKEY_LOCAL_MACHINE or HKEY_CURRENT_USER.
</p>

<h3>find_package linux for user packages</h3>

<br>

<p>
Save the path to the `.cmake` file on a file with any name located on:
</p>

<p>
~/.cmake/packages/&lt;package_name&gt;/
</p>

<h3>force 32bit on mingw-w64</h3>

<br>

<p>
Some versions doesn't support both 32 and 64 bit, for the ones that does, you need to create a _platform file_:<br>
<a href="https://stackoverflow.com/questions/5805874/the-proper-way-of-forcing-a-32-bit-compile-using-cmake" title="https://stackoverflow.com/questions/5805874/the-proper-way-of-forcing-a-32-bit-compile-using-cmake" class="https">https://stackoverflow.com/questions/5805874/the-proper-way-of-forcing-a-32-bit-compile-using-cmake</a>
</p>

<p>
Other versions you need to have 2 compilers, one for 64 and one for 32. When creating the builds,<br>
add the compiler you want to use to `PATH` (for example 32 bit) and creste the build. Example:
</p>

<p>
<div style='padding-left: 30pt'>
mkdir build32<br>
cd build32<br>
PATH path/to/i686-mingw-w64/bin;%PATH%<br>
cmake ..
</div>
</p>

<p>
<div style='padding-left: 30pt'>
(in another terminal)<br>
mkdir build64<br>
cd build64<br>
PATH path/to/x86_64-mingw-w64/bin;%PATH%<br>
cmake ..
</div>
</p>

<p>
Now you can build any version from the base folder
</p>

<p>
<div style='padding-left: 30pt'>
cmake --build build32<br>
cmake --build build64
</div>
</p>

<br>

<h2>Install target</h2>

<div class="zim-object">
<pre><code class="cmake">install(TARGET targetname ARCHIVE DESTINATION some/path)
install(DIRECTORY dir_name/ DESTINATION some/path)</code></pre>
</div>

<br>

<p>
<b>IMPORTANT</b>: note the '/' at the end of `DIRECTORY dir_name/`, if you don't add it, the contents will be copied to `some/path/dir_name` which you may or may not want.
</p>

<p>
On linux, if wants to install somewhere else than default (/usr/local), regenerate with different prefix:
</p>

<p>
<div style='padding-left: 30pt'>
cmake -D CMAKE_INSTALL_PREFIX=/ &lt;source_dir&gt;
</div>
</p>

<p>
Then when install add DESTDIR
</p>

<p>
<div style='padding-left: 30pt'>
make install DESTDIR=some/other/folder
</div>
</p>

<br>

<h2>Netbeans</h2>

<br>

<p>
When creating a project with existing sources with cmake, select custom, then you can use a different directory for the build. If you don't do like this, the cmake files will polute you base folder.
</p>

<h2>RPATH</h2>

<br>

<p>
<b>RPATH</b> will be written by default including all libraries cmake thinks it needs, this is good for developing. When you <b>install</b> it can be replaced:
</p>
<div class="zim-object">
<pre><code class="cmake">set_target_properties(target_name PROPERTIES INSTALL_RPATH "$ORIGIN/lib")</code></pre>
</div>

<br>

<h2>mingw</h2>

<br>

<p>
If not on path, before running cmake add your desired mingw/bin to path
</p>

<h2>Code::Blocks</h2>

<br>

<p>
Generate project
</p>

<p>
<div style='padding-left: 30pt'>
cmake -G "CodeBlocks - MinGW Makefiles" path/to/source
</div>
</p>

<p>
Then within CodeBlocks there will be several targets.
</p>

<p>
IMPORTANT: For the special targets, use <b>build</b> button and not the <b>run</b> button.
</p>

<p>
edit_cache -&gt; will launch `cmake-gui` to reconfigure<br>
install -&gt; will run `make install`, change destination by `edit_cache`
</p>

<h3>Generated Targets</h3>

<br>

<p>
target_name: The normal build procedure<br>
target_name/fast: Build procedure without checking external dependencies<br>
install: The normal install<br>
install/strip: Installs and strip the binaries<br>
install/local: _Need to check_
</p>

<br>

<h2>more notes</h2>

<br>

<p>
CMAKE_PREFIX_PATH=/my/path/to/base
</p>

<p>
CMAKE_PREFIX_PATH/lib/cmake/&lt;names&gt;
</p>


			<br>
			<span class="backlinks">
				<hr class='footnotes'>
				<b>Backlinks:</b>
				<a href='../languages/c++.html'>languages:c++</a>
				<br /><br />
			</span>

			
		</div>
	</div>
</body>
</html>

