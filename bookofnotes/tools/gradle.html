<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>gradle</title>
	<meta name="generator" content="Zim 0.68-rc1">
	<meta name="viewport" content="width=device-width">
	<!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans:300&subset=latin,greek,latin-ext' rel='stylesheet' type='text/css'> -->
	<![if !IE]>
	<!-- comment out for IE since it spams the user with warnings -->
	<script type='text/javascript' src='http://code.jquery.com/jquery-1.7.1.js'></script>
	<script type='text/javascript'>
		$(window).load(function(){$("#navigation").height( $("#content").height()+65 );});
	</script>
	<![endif]>
	<style>
		body, html {
			height:100%;
			font-family:'Open Sans', sans-serif;
			line-height:1.5em;
			font-weight:300;
			background-color:#FAFAFA;
			text-rendering:geometricPrecision;
			margin:0;
			padding:0;
		}
		.wrapper {
			height:100%;
			position:relative;
		}
		#navigation {
			background-color:#F3F3F3;
			display:inline-block;
			border-right:1px solid #EAEAEA;
			padding-right:65px;
			padding-top:65px;
			padding-left:25px;
			position:relative;
			float:left;
			min-height:100%;
		}
		#content {
			float:left;
			display:inline-block;
			position:absolute;
			max-width:960px;
			padding:65px;
		}
		#navigation ul {
			margin-top:0;
			margin-bottom:0;
			padding-left:40px;
		}
		#navigation li {
			list-style-type:none;
		}
		#navigation a {
			text-decoration:none;
			color:gray;
		}
		#navigation strong {
			color:#4E9A06;
			font-weight:400;
		}
		#navigation a:hover {
			text-decoration:underline;
		}
		#content h1:nth-child(1) {
			margin-top:0;
		}
		h1,h2,h3,h4,h5,h6 {
			color:#4E9A06;
			font-weight:300;
			margin-bottom: 0;
		}
		p {
			margin-top: 0;
		}
		#content a {
			color:#CE5C00;
		}
		#content a {
			text-decoration: none;
		}
		#content a:hover {
			text-decoration: underline;
		}
		#content a:active {
			text-decoration: underline;
		}
		#content strike {
			color: grey;
		}
		#content u {
			text-decoration: none;
			background-color: yellow;
		}
		#content tt {
			color: #2e3436;
		}
		#content pre {
			color: #2e3436;
			margin-left: 20px;
		}
		.backlinks {
			color:gray;
		}
		hr.footnotes {
			width: 20%;
			margin-left: 0;
		}
		@media print{
			#navigation{
				background-color:#FFF;
			}
		}

		span.zim-tag {
			color: #ce5c00;
		}
		div.zim-object {
			border-style:solid;
			border-width:1px;
		}

		.checked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8sMEGsKGkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEBUlEQVRIx62V22tdRRTGf7Nn73P2ybntnNOe3NqkPTGgLTVUUZF6QatSLOKTPgqCIqLgQ0H/A1sQQbBYCBb1QfAxiC8tSO1FqHkwJVKtjdTGNraUmObsc9nXmfGh7cGYpM1D5nHWzPetteZb3wg2eB2YqYm4zSadsMtoboiNBH/3TE0awx6j+MRoxoTg/IYRvP19TQrJS0bzhdHGSyKFkLTtjSKwMjyiEz43ynhtP6bdjBCWyFobAf7eT7VhNF/q1FRbjYjmUohlCVPwnB+6FUxMTJipqSmUUhhjEGKd3bMT4ks/Y6oLBK2Yth8hHYtCJXOix7Nf7xLMzc0xOzvLzp078TyPNE3viW3QJPXzhNWbxFFKHCmMhoLn/FHodd48vGfhapdAacXQlkFK5dL6wIUm6fuTZPuvqDQhaMUYYyiVyuQr6rXDexYuAdi3tSv1ZJNs/R/CaszzT+1na88uXFnCEnJVgivBNN8uTJKmHQI/ptOOcXNZzMz9mOqFs90OHpipWcYwlo5P4ebnuOkrvr5wgrH+h3im7y36MzuwRXYZeKha/OhP0EkadFoxQSdGSotedR/+XwMc2XvKdNUFOFqZx6LKZWIiwjgkikNmLp/hm8sH+K1zjFTHXfBYdTi+eJArzXM0GxFxoBDCopLvo/fqEwi1XPkWkGqjFo2TgB1jOYZUKZTS/D1/ncmLh7jon0IbRWoiTi59ymzzJEEQE3cStNZsGxqlfPE57MBbOR8fP3hDGalOO9fq2DlBvmZw8xa2IxACGn6TydlD/O6f5OzSV/zif0cYhLQaEXGkKBbz7Ov/AOlXV1cxgBJRI3fuSTrpTawt18kWIZN1CFuaONI0w0WOXfsI43YIggh/KUSlhqxrMz74AkOZcWBm9QkH+Gw8NDLuITi+m0yzhluSyJzBLcpblUhFxywSRAEtPwQjsKVN30CNh0uvYuOubSHLtN3J0TO1j0pmBNuFbFWRK0gyPRZpktL2I5JQkclKakNlnh54g6ocvevUr/Ai2a7wineEkcJupA3S1Wg0nVZM2E6wbEF5U5G9Q++wI7sfR7h3N8HVNstykBfzH+KJEZwiWD0aIwxCgJ0R1Mu7GXOeJSuK93bZtQIle4D9pUNU5DC5jEsu55AvZakM5NicGyEj8uuz8bUCQgj67QfY671P3vEoeC69gy695U1U7NG7XV0pUwBjDJa1/JJlWWxzHuflzQe5FJ/GsgUVuZ2t8lEkTvfc0aNHb72flBhjVicQQqCUuvM3/M+WDVguWBrMVdDXEGZlBVEUrVCU9d9s5+fnaTQa2PZyPxEIhJaI1EEoZwX4ncynp6fXrmB4eJjR0VFarRbNZnP9P9rt9gohqNVq1Ov1ZbF/AZGev3hLJ2/zAAAAAElFTkSuQmCC)}
		.xchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8bDYnDxEwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEK0lEQVRIx9WVS2hTWRjHf/eR3CY1nbxMH2YiZRQS6qO13YlMVxY3SnVcuNIBFezGpSADLoQqLu1sHJCqdCFSXFpw4YOCSH3BtFqttTNamabX3DS5bfO6uffMoglja3RGcDMHzuac7/z/53++//cd+L8P6VuCPQYZ8ADNgBd4J31DcDcQs+GnHByRocEDv0kfBSjAOlYCs11Q+gpwDegS8LMJ+3QIK0ATzEhV8Odnz5bzw8P4dJ25aJQ/WlvJ1df/K7hSLtOcTNI+Pk69rpMTgqIQhCDvh1/VSpw79+gRrRMTmLZNezLJJsPg+a5dmOEwQlFqg1sWG16/Jv7sGWXDwBACFQjC9HcwIMONKkGp4PGAJGEDS0IQmZlhnWnye3c3eiyGo6qr3WHbrJ+dJf7gAXI6zSIr72T7/fgzmT4FHnTBsgrQBfYvTU0km5vxz86iADnAm0rRPTWFt7cXZccOJJcLAGHb2K9ekT93jmwmwwdAAFpjI6Ntbfxw5879ag7l6o1sr5eHHR3IsRgeQK/M4sQE+YEB7JcvEY6zAj45SWFgAPPxYwzHoQxIkQjTPT0kIxE+Noj8sexFn4/xnh58iQTeSpHkHAdrbIzi0BCOrmNPTpK/eJHM3bt8sCyKQCiR4NWePWSiUZw1+ZLXJm4pFKLhzBlCsRh2RUXacVgeGaF47RrL58+zcP8+RrmMkCQinZ1EL1zAjERqmkH+tLYl1G3bCJw4QUjT0IA0MJfLMX/5MqmHD0nZNiUgtGULG/r7ccXjINWuWbnmqsuFu7sb/4EDNLlcBIEioNs2KUAFGmMxmk6dQm1tRZI+3xBqEkiShBQOox05Ql1nJ26gvuIUAWiKQnj/ftStW5Fk+YuF+NldsbBA4cYN9KdPmaso8Fc62ZJtk7l1C2t0FGdxESHE1xE4hkHh6lX0oSHSpRIewC/LrPf7CSgKNpCamkI/fZr8pUuIZBIcpyaBunahPp1mub+fDyMjGKUSChCsq6Nh717q9u2jbnSU0uAgRrFIwTThyhUCqRS+hgZKLS1fJvDm87SNjZGcnsYUAjcQ8vsJ9/Xh7u1FDgRQN20iks3iDA+zZFmYhQLqzZtsj8WY3L0baY2Sf55ICCKpFHUzM2SEQAJCHg+hY8fQDh5EDgRWDoRC1J88SePRo2geD0XAcBy8b98Sv3ePYDZbbf2rFQjLIphMsmDbaEBQVQkePox26BCSz7e6i4bDrDt+nGYhmBscpFAskheC4Js3bPR4qHphFYEnlcI7P4/jdqNpGu8TCe4oCsXr1z//F2ga3+/cSfTJE0qmSVYIsKzaOZDcbjKyzFIiwfvt21kMBLA07YsetzWNd+3tLLW0sH5igvT8PH9Go/z44kX+E4LGjg7GDYOcy4XlOEgLC//5P/5LCFzxOPLmzWyIx+m6fduu7v0NVGqyTSycKksAAAAASUVORK5CYII=)}
		.unchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8qAt8h3m8AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAA60lEQVRIx+2VsQqDMBRF70sCLg5OLoKgjk7+lJ/hh+STXBwcnRz8ArMEkrxOFktbaC3tULzTg5e8k5vADXDq70VbobXmvu/hvQczg4heHrJfXxQFuq67blZbMc8zpmlCXddIkgTOuZcBUko45zCOI6y1Nz2xFSEEZFmGOI7fGg4A3nsQEZqmuXOu9jallACAtm3fvmutNaIoAjM/dkBECCF89KCbk4eAb+kEnIAT8EsAM0OIz3hSyrssUvss8t5fg+uIrLXPs0gIgWVZYIyBUurQyYdheO4gz3NUVQVjDNZ1PfSjpWmKsixvehfB9GBZ3NndrgAAAABJRU5ErkJggg==)}
		.migrated-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB+AKHREFA8vJSnkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAC1klEQVRIx+2VT0hUURTGf/e958w4Tc3TYowMw1GyEgwr1MqsFmbZIrIWQZsWJUjbdoHQpl3Qps0swnCRECQFYkR/TC1iKkqmfzAKTo2Vf8hoRsfR995tkRMT87RRWkUHHhy495zvnvvu933wP/75EKkkEAjIYDCIaZpIKRFCZN0kfX9xcTGtra2/irVUEolECIfDlJeXo+s6hmFkDaCqKoZhEAqFSCaTv60pqcSyLAoLC/F4PEtqDmCaJkIIKisrMybX0sdUVRWA5ubmPzdNjjI1cpXkZC/O1fV03PXgdDqRUtpPIITAsqxsDz0Z/3CZQv8uqo4N4C8/Tp2/DdM0MiZQlvk41OTkI/LW1SGtCVb5drD3eCc71wcA+VcAHA5vDd8+3UGakxiJV7i9pdQevU5T1R35pJ3MV5QW1pf+0kWBheJ2SWua8EQXZXsu4fVVYEz1sEKvof5EuxjoPvzpcRvrdp9C2gGMx6cpOHBmbImMesds7BZubwMVDTfXDnQ3vQfK7AC8wLfExMX5whyQc3q2OEnjGm5vE76SQxsfBLr77a7CNf+n0r/l6sSMtsBSnurckiIILCobAtVZhpF4gZF4jubaymj4Ch/fd380LE7bAnjc0NPxk2yqpmEuwGxF0ag+0k5uTpzZeBeaazvj0We8fXojainsb2xh2BZgbe0gSIllzSIUh63wfQ6dZ/O2fbjcKlOj58jJ3cVENESw5yErc9nf2MLQ4jwQAkV1Lqiq37/cZ9WaahJjF9AcmxiPDhLs7ePe23oOnmUwg2hSShQle96tKDjA2HAniusgo9FxnvY9Jxw7RWzGYy92QghM00x5g53qp9sHmtB58/o2umOI2NwGolMnMYUHIb7aAyiKwsjICLqu2/qBEIKUUAohMaSHSLyBSMoPTINQ6CX5+fn2AEVFRZSUlBCPx4nFYhl3L4RESjF/GEgX3pSj+Xw+/H7/b3U/AEOZFnp7O5+5AAAAAElFTkSuQmCC)}
		ul {list-style-image: none}
		/* ul rule needed to reset style for sub-bullets */

	</style>
</head>

<body>
	<div class="wrapper">
		<div id="navigation"> <ul>
<li><a href="../Cloud.html" title="Cloud" class="page">Cloud</a></li>
<li><a href="../index.html" title="index" class="page">index</a></li>
<li><a href="../languages.html" title="languages" class="page">languages</a></li>
<li><a href="../Networking.html" title="Networking" class="page">Networking</a></li>
<li><a href="../Operating_Systems.html" title="Operating Systems" class="page">Operating Systems</a></li>
<li><a href="../tools.html" title="tools" class="page">tools</a>
<ul>
<li><a href="./browsers.html" title="browsers" class="page">browsers</a></li>
<li><a href="./CMake.html" title="CMake" class="page">CMake</a></li>
<li><a href="./eclipse.html" title="eclipse" class="page">eclipse</a></li>
<li><a href="./git.html" title="git" class="page">git</a></li>
<li><b>gradle</b></li>
<li><a href="./intellij.html" title="intellij" class="page">intellij</a></li>
<li><a href="./mingw-w64.html" title="mingw-w64" class="page">mingw-w64</a></li>
<li><a href="./nodejs.html" title="nodejs" class="page">nodejs</a></li>
<li><a href="./npm.html" title="npm" class="page">npm</a></li>
<li><a href="./tmux.html" title="tmux" class="page">tmux</a></li>
<li><a href="./vscode.html" title="vscode" class="page">vscode</a></li>
</ul>
</li>
<li><a href="../video.html" title="video" class="page">video</a></li>
<li><a href="../web.html" title="web" class="page">web</a></li>
</ul>
 </div>
		<div id="content">
			<h1>gradle <a name='tools:gradle'></a></h1>

			<p>
<b>Install</b>: Download gradle-${version}-bin.zip, uncompress, add bin folder to path.
</p>

<p>
<b>Configuration</b><br>
<i>Adding this config in </i><tt>~/.gradle/init.gradle</tt><i> file will make some tasks more convenient, faster access to repositories from China.</i>
</p>
<div class="zim-object">
<pre><code class="groovy">allprojects {

	// task example
	task repositories {
		group 'help'
		description 'List the configured repositories and their values.' 

		doLast {
			println repositories.collect { "${it.name} = ${it.url}"  }
		}
	}
    
	task initSimple(type: InitBuild) {
		group 'build setup'
		description 'Initializes a gradle project without the wrapper.'
	}

	repositories {

		// create a repository for local publishing
		ivy {
			name "areponame"
			url "file:///path/to/the/local/repo"
		}

		// replace standard repositories with aliyun mirrors for fast China access
		all { ArtifactRepository repo -&gt;
        
			if ( (repo.name == "BintrayJCenter") &amp;&amp; (repo.url.toString() == "https://jcenter.bintray.com/") ) {
				repo.url = "http://maven.aliyun.com/nexus/content/repositories/jcenter/"
				println "Using Aliyun jcenter mirror: ${repo.url}"
			}
			if ( (repo.name == "MavenRepo") &amp;&amp; ((repo.url.toString() == "https://repo1.maven.org/maven2/") || (repo.url.toString() == "https://repo.maven.apache.org/maven2/")) ) {
				repo.url = "http://maven.aliyun.com/nexus/content/repositories/central/"
				println "Using Aliyun maven mirror: ${repo.url}"
			}
		}
	}  
}</code></pre>
</div>

<br>

<p>
Basic commands:
</p>
<div class="zim-object">
<pre><code class="sh"># create project
gradle init --type &lt;project type&gt;

# create project without wrapper, using previosly defined 'initSimple' task
gradle initSimple --type &lt;project type&gt;

# initialize gradle wrapper on current project
gradle wrapper

# run multiple tasks
gradle task1 task2 task3
gradle buildFrontend war bootRepackage deploy

# run without daemon
gradle --no-daemon &lt;task&gt;

# stop daemon
gradle --stop

# check running daemons status
gradle --status

# run continuous, will rerun task when input changes
gradle --continuous &lt;task&gt;
gradle -t &lt;task&gt;</code></pre>
</div>

<p>
Project types:
</p>

<p>
<ul>
<li>basic</li>
<li>groovy-application</li>
<li>groovy-library</li>
<li>java-application</li>
<li>java-library</li>
<li>pom</li>
<li>scala-library</li>
</ul>
</p>

<h3>build.gradle</h3>

<div class="zim-object">
<pre><code class="groovy">
// adding repositories to download packages and such
repositories {
	// jcenter is a preconfigured repository
	jcenter()

	// use a maven repository with specific url
	maven {
		url "http://maven.aliyun.com/nexus/content/repositories/central/" 
	}
	
	// ivy repository on local filesystem
	ivy {
		name "somereponame"
		url "file:///path/to/repo"
	}
}

// add dependencies
dependencies {

	// depend on another project, this also requires a settings.gradle
	compile project(':ref-project-name')

	// if using 'war' plugin
	// There is providedCompile and providedRuntime for dependencies, these will be added to the war if using bootRepackage.
	
}

// simple task
task release {
	group war.group
	description 'Some special build task'

	dependsOn buildFrontend
	dependsOn war
}

// war notes
war {
	// ignore files in other folders than webapp
	rootSpec.exclude '**/*.some.thing'

	// generated versioned name valid for tomcat
	archiveName "${baseName}##${version}.${extension}"
}

// If not using standard directory structure change like this
sourceSets {
	main {
		java {
			srcDirs = [ 'src' ]
		}
	}
}

// if want to publish generated packages
// 1- its good to have a version defined
version = "0.1.2"

// 2- define a group for your package
group = "com.aaronps"

// 3- define what things to upload.
artifacts {
	archives jar
}

// 4- tell twhere to copy/upload the packages
uploadArchives {
	repositories {
		add project.repositories.somereponame
	}
}

</code></pre>
</div>

<br>

<h3>settings.gradle</h3>

<p>
<i>This file is needed when using dependencies on other projects</i>
</p>
<div class="zim-object">
<pre><code class="groovy">include ':ref-project-name'
project(':ref-project-name').projectDir = file('path/to/project')</code></pre>
</div>

<br>

<h2>SVN, GIT, Import to IDE</h2>

<br>

<p>
Only need to commit:
</p>

<p>
<ul>
<li>src/</li>
<li>gradle/</li>
<li>build.gradle</li>
<li>gradlew</li>
<li>gradlew.bat</li>
<li>settings.gradle</li>
</ul>
</p>

<p>
Then import as gradle project.
</p>

<p>
Can generate project files for eclipse:
</p>

<p>
<div style='padding-left: 30pt'>
apply plugin: 'eclipse'
</div>
</p>

<p>
then run task 'eclipse'.
</p>

<p>
Can generate project files for intellij-idea:
</p>

<p>
<div style='padding-left: 30pt'>
apply plugin: 'idea'
</div>
</p>

<p>
run task 'idea'.
</p>

<h2>Notes</h2>

<br>

<p>
<b>If your jdk version is different with the global jre version, SET JDK_HOME</b>
</p>

<p>
`src/main/resources` will be added verbatim to the jar file.
</p>

<p>
To tell it to download the sources, apply plugin eclipse, then generate the eclipse files, it will download the sources automatically, later you can delete the eclipse files but the sources will be picked by netbeans
</p>

<h2>Errors</h2>

<br>

<h3>'default' configuration not found</h3>

<br>

<p>
This is mostly probable because we are 'including' another project and gradle cannot find its build.gradle
</p>

<h2>Template idea</h2>

<br>

<p>
consider using Copy task for custom templates
</p>
<div class="zim-object">
<pre><code class="groovy">copy {
   into 'build/webroot'
   exclude '**/.svn/**'
   from('src/main/webapp') {
	  include '**/*.jsp'
	  filter(ReplaceTokens, tokens:[copyright:'2009', version:'2.3.1'])
   }
   from('src/main/js') {
	  include '**/*.js'
   }
}</code></pre>
</div>

<p>
maybe use ~/.gradle/templates as base for downloaded<br>
templates, could use zip and/or full folders (including git).
</p>

<h2>Basic testing</h2>

<br>

<h3>add dependencies</h3>

<div class="zim-object">
<pre><code class="groovy">dependencies {
	// if java
	testCompile 'junit:junit:4.12'

	// if java-library
	testImplementation 'junit:junit:4.12'
}

// when testing, the program output (System.out) is not shown, if wants to see it
test {
	dependsOn cleanTest
	testLogging.showStandardStreams = true
}

// if you want to format the resulting output from tests:	
tasks.withType(Test) {
	systemProperty 'java.util.logging.SimpleFormatter.format', '%1$tY-%1$tm-%1$td %1$tH:%1$tM:%1$tS %4$s | %2$s: %5$s%6$s%n'
}
</code></pre>
</div>

<br>

<h3>basic test file</h3>

<div class="zim-object">
<pre><code class="java">import static org.junit.Assert.*;
import org.junit.Test;

public class SomeTest {

	@Test // Test has timeout=milliseconds
	// it is important to be public!
	public void firstTest() {
	
		// use the Assert.* funs
		fail("some message");
	}
}</code></pre>
</div>


			<br>
			<span class="backlinks">
			</span>

			
		</div>
	</div>
</body>
</html>

